<div class="max-w-sm overflow-hidden rounded-lg shadow-xl">
  <div class="flex flex-col justify-between gap-0.5 p-4">
    <div class="flex items-center justify-between">
      <div class="font-poppins mb-1 text-xl font-bold">{{ event.name }}</div>
      <span
        class="inline-flex items-center rounded-full bg-blue-100 px-3 py-1 text-xs font-medium text-blue-800 transition hover:bg-blue-200"
      >
        <i [class]="eventTypeIcons[event.type]" class="mr-1"></i>
        {{ event.type }}
      </span>
    </div>
    <div><i class="fas fa-map-marker-alt mr-2 text-red-500"></i>{{ event.location }}</div>
    <div>
      <i class="fas fa-calendar-alt mr-1 text-blue-500"></i>
      {{ event.eventDate | date: 'dd/MM/yy' }} ({{ event.startTime }} - {{ event.endTime }})
    </div>

    <div>
      <i class="fas fa-tags mr-1 text-green-600"></i>
      <span class="text-gray-500 line-through">₹{{ event.originalPrice }}</span>
      ₹{{ event.price }}
    </div>

    <div>
      <i class="fas fa-chair mr-1 text-purple-500"></i> Seats available:
      {{ event.seatsAvailable }}
    </div>

    <ng-container *ngIf="user$ | async as user; else guestView">
      <div *ngIf="!postedByUser(user) && !contactedByUser(user) && showContactSellerButton">
        <button
          (click)="onGetSellerContact(user)"
          type="button"
          class="mt-3 cursor-pointer rounded-lg bg-black px-2 py-1 text-center text-xs font-medium text-white hover:bg-gray-700 hover:text-sm"
        >
          <i class="fas fa-envelope mr-1 text-xs text-white"></i> Contact Seller
        </button>
      </div>
      <div *ngIf="!postedByUser(user) && contactedByUser(user) && showContactedBy">
        <p class="mt-2 text-xs text-black">
          <i class="fas fa-info-circle mr-1"></i>You already contacted the seller. Check your email.
        </p>
      </div>
      <div *ngIf="postedByUser(user) && showPostedBy">
        <p class="mt-2 text-xs text-black"><i class="fas fa-info-circle mr-1"></i>Posted by you.</p>

        <ng-container *ngIf="event.status != 'sold'; else guestView">
          <div class="flex items-center justify-between">
            <button
              *ngIf="showDeleteButton"
              (click)="onDeleteTicket()"
              type="button"
              class="mt-3 cursor-pointer rounded-lg bg-black px-2 py-1 text-center text-[8px] font-medium text-white hover:bg-red-700"
            >
              <i class="fas fa-trash mr-1 text-[10px] text-white"></i> Delete Ticket
            </button>
            <button
              *ngIf="showMarkAsSoldButton"
              (click)="onMarkAsSold()"
              type="button"
              class="mt-3 cursor-pointer rounded-lg bg-black px-2 py-1 text-center text-[8px] font-medium text-white hover:bg-blue-700"
            >
              <i class="fas fa-check mr-1 text-[10px] text-white"></i> Mark as Sold
            </button>
            <button
              *ngIf="showUpdateButton"
              (click)="onUpdateTicket()"
              type="button"
              class="mt-3 cursor-pointer rounded-lg bg-black px-2 py-1 text-center text-[8px] font-medium text-white hover:bg-blue-700"
            >
              <i class="fas fa-edit mr-1 text-[10px] text-white"></i> Update Ticket
            </button>
          </div>
        </ng-container>
        <ng-template #guestView *ngIf="showTicketIsSold">
          <p class="mt-2 text-xs text-black">
            <i class="fas fa-info-circle mr-1"></i>Ticket is sold.
          </p>
        </ng-template>
      </div>
    </ng-container>

    <ng-template #guestView>
      <button
        (click)="onGetSellerContact(null)"
        type="button"
        class="mt-3 w-30 cursor-pointer rounded-lg bg-black py-1 text-center text-xs font-medium text-white hover:bg-gray-700"
      >
        <i class="fas fa-envelope mr-1 text-xs text-white"></i> Contact Seller
      </button>
    </ng-template>
  </div>
</div>
