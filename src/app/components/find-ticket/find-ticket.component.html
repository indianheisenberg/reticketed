<div class="flex flex-col justify-between bg-gray-100 p-10">
  <div>
    <app-search-bar
      [placeholderText]="'Search any ticket...'"
      [class]="'mx-auto mt-2 w-full max-w-sm'"
      [value]="searchString() || ''"
      (searchButtonClicked)="onSearch($event)"
    ></app-search-bar>
  </div>

  <div class="mt-10 p-4 pl-10 text-left text-lg font-bold">
    @if (filteredTickets.length > 0) {
      @if (searchString()) {
        <div>Found {{ filteredTickets.length }} tickets for "{{ searchString() }}"</div>
      } @else if (categoryString()) {
        <div>Found {{ filteredTickets.length }} tickets for "{{ categoryString() }}"</div>
      } @else {
        <div>Found {{ filteredTickets.length }} tickets</div>
      }
    } @else {
      <div>No tickets found for "{{ searchString() || categoryString() }}"</div>
    }
  </div>

  <hr class="mt-2 mb-4 border-t border-gray-300" />

  <div class="grid grid-cols-1 items-center gap-4 p-10 pb-20 md:grid-cols-3">
    @for (ticket of paginatedTickets; track ticket.id) {
      <app-ticket-card
        [event]="ticket"
        [showDeleteButton]="false"
        [showUpdateButton]="false"
        [showMarkAsSoldButton]="false"
        [showPostedBy]="true"
      ></app-ticket-card>
    }
  </div>

  <div class="mt-4 flex justify-center" *ngIf="paginatedTickets.length > 0">
    <nav class="inline-flex -space-x-px rounded-md shadow-sm" aria-label="Pagination">
      <button
        class="relative inline-flex items-center rounded-l-md border border-gray-300 bg-white px-3 py-1 text-sm font-medium text-gray-700 hover:bg-gray-100"
        (click)="goToPage(currentPage - 1)"
        [disabled]="currentPage === 1"
      >
        Prev
      </button>
      <ng-container *ngFor="let page of totalPagesArray">
        <button
          class="relative inline-flex items-center border border-gray-300 px-3 py-1 text-sm font-medium hover:bg-blue-100"
          [ngClass]="{
            'bg-blue-500 text-white': currentPage === page,
            'bg-white text-gray-700': currentPage !== page,
          }"
          (click)="goToPage(page)"
        >
          {{ page }}
        </button>
      </ng-container>
      <button
        class="relative inline-flex items-center rounded-r-md border border-gray-300 bg-white px-3 py-1 text-sm font-medium text-gray-700 hover:bg-gray-100"
        (click)="goToPage(currentPage + 1)"
        [disabled]="currentPage === totalPages"
      >
        Next
      </button>
    </nav>
  </div>
</div>
